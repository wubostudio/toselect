/*!
 * --------------------------------------------------------------------------
 * ToSelect (v1.3.0): jquery.toselect.js
 * Copyright 2020 WuBoStudio
 * Licensed under MIT (https://github.com/wubostudio/toselect/blob/master/LICENSE)
 * ---------------------------------------------------------------------------
 */
+function(n){"use strict";function i(i){return this.each(function(){var r=n(this),u=r.data("toselect"),f=n.extend({},t.DEFAULTS,r.data(),typeof i=="object"&&i);u||r.data("toselect",u=new t(this,f));typeof i=="string"&&u[i]()})}var t,r;const u="ToSelect",f="1.3.1";t=function(t,i){this.source=n(t);this.selects={parent:this.getParentSelect(),child:this.getChildSelect()};this.options=i;this.name=u;this.version=f;var r=this,e=n.Event("toselect.init",{relatedTarget:this.source});this.init(n.proxy(function(){setTimeout(function(){r.source.trigger(e)},0)},this))};t.DEFAULTS={};t.prototype={constructor:t,init:function(t){this.hideSource();this.bindParentSelect();this.bindChildSelect();this.selects.parent.on("change",n.proxy(function(){this.parentOnChange()},this));this.selects.child.on("change",n.proxy(function(){this.childOnChange()},this));t&&t()},hideSource:function(){this.source.hide()},getParentSelect:function(){var t,i=this.source;return t=i.attr("data-parent"),n(t)},getChildSelect:function(){var t,i=this.source;return t=i.attr("data-child"),n(t)},bindParentSelect:function(){var i=this.selects.parent,r=this.source,u=this.getParentSelectMetadata,f=this.createSelectOption,t=r.children("optgroup");if(!t)return!1;n.each(t,function(){var r=u(n(this)),t;r&&(t=f(r),t.data("toselect.optgroup",n(this)),i.append(t))});this.source.trigger(n.Event("toselect.parent.updated",{relatedTarget:this.selects.parent}))},getParentSelectMetadata:function(n){var t,r,i;return n?n.attr("label")?(t=n.attr("label"),r=n.find("option:selected").length>0,/^TextValue\[.*\]+$/.test(t))?(i=eval(t.replace("TextValue","")),{text:i[0],value:i.length===2?i[1]:i[0],selected:r}):{text:t,value:t,selected:r}:!1:!1},bindChildSelect:function(){var u=this.selects.parent,f=this.selects.child,e=this.getChildSelectMetadata,o=this.createSelectOption,i=u.children("option:selected"),t,r;i&&(t=n(i).data("toselect.optgroup"),t)&&(r=t.find("option"),n.each(r,function(){var t=e(n(this)),i;t&&(i=o(t),f.append(i))}),this.source.trigger(n.Event("toselect.child.updated",{relatedTarget:this.selects.child})))},getChildSelectMetadata:function(n){return n?{text:n.text(),value:n.val(),disabled:n.is(":disabled"),selected:n.is(":selected")}:!1},createSelectOption:function(t){if(t===null)return!1;var i=document.createElement("option");return i.innerText=t.text,i.setAttribute("value",t.value),t.selected&&i.setAttribute("selected","selected"),t.disabled&&i.setAttribute("disabled","disabled"),n(i)},parentOnChange:function(){var t=this.selects.parent.find("option:selected");this.source.trigger(n.Event("toselect.parent.changed",{relatedTarget:this.selects.parent,text:t.text(),value:t.val()}));this.selects.child.find('option:not([data-keep="true"])').remove();this.bindChildSelect();this.childOnChange()},childOnChange:function(){var t=this.selects.child.find("option:selected");this.source.val(t.val());this.source.trigger(n.Event("toselect.child.changed",{relatedTarget:this.selects.child,text:t.text(),value:t.val()}))}};r=n.fn.toSelect;n.fn.toSelect=i;n.fn.toSelect.Constructor=t;n.fn.toSelect.noConflict=function(){return n.fn.toSelect=r,this};n(window).on("load",function(){n('[data-role="toselect"]').each(function(){var t=n(this);i.call(t,t.data())})})}(jQuery);
//# sourceMappingURL=jquery.toselect.min.js.map